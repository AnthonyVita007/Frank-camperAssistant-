<!------------------------------------------------------------------
HEADER + WORKSPACE + FOOTER - Modalità DEBUG con switch AI LOCAL↔CLOUD
------------------------------------------------------------------>
<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frank Assistant - Debug Mode</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/debug.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/debug-tool-bubbles.css') }}">
</head>

<body>

    <!------------------------------------------------------------------
    HEADER FISSO con brand centrato e switch AI a destra
    ------------------------------------------------------------------>
    <header class="header-fixed">
        <div class="header-bar">
            <h1>Frank/dev</h1>

            <!-- Switch AI stile "interruttore giocattolo" -->
            <div class="ai-toggle" id="ai-toggle" aria-label="Selettore AI">
                <span class="ai-label ai-label-left" aria-hidden="false">LOCAL</span>
                <button
                    id="ai-switch"
                    class="ai-switch"
                    type="button"
                    role="switch"
                    aria-pressed="false"
                    aria-label="Attiva CLOUD (Gemini)"
                    data-provider="local"
                >
                    <span class="ai-switch-knob" aria-hidden="true"></span>
                </button>
                <span class="ai-label ai-label-right" aria-hidden="false">CLOUD</span>
            </div>
        </div>
    </header>

    <!------------------------------------------------------------------
    WORKSPACE CENTRALE SCROLLABILE
    ------------------------------------------------------------------>
    <main class="workspace-scrollable">
        <div id="log-container"></div>
    </main>

    <!------------------------------------------------------------------
    FOOTER FISSO
    ------------------------------------------------------------------>
    <footer class="footer-fixed">
        <div class="input-area">
            <input type="text" id="command-input" placeholder="Scrivi un comando o fai una domanda...">
            <button id="send-button">Invia</button>
        </div>
    </footer>

    <!------------------------------------------------------------------
    Scripts
    ------------------------------------------------------------------>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.min.js"></script>
    <!-- Markdown rendering and security libraries - simplified for testing -->
    <script>
        // Fallback for missing markdown libraries
        if (typeof marked === 'undefined') {
            window.marked = { parse: function(text) { return text; } };
        }
        if (typeof DOMPurify === 'undefined') {
            window.DOMPurify = { sanitize: function(html) { return html; } };
        }
    </script>
    <script src="{{ url_for('static', filename='js/debug.js') }}"></script>

</body>

</html>